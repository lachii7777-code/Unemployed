<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Yo ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* EDIT COLORS & FONTS HERE */
        :root {
            --primary-pink: #ff85a1;
            --dark-pink: #f72585;
            --bg-soft: #fff0f3;
            --font-main: 'Quicksand', sans-serif;
            --font-romantic: 'Dancing Script', cursive;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-soft);
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .romantic-text { font-family: var(--font-romantic); }

        .hidden { display: none !important; }

        /* Memory Game Styles */
        .grid-5x5 {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            max-width: 400px;
            margin: auto;
        }

        .tile {
            aspect-ratio: 1;
            perspective: 1000px;
            cursor: pointer;
        }

        .tile-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .tile.flipped .tile-inner { transform: rotateY(180deg); }

        .tile-front, .tile-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 1.5rem;
        }

        .tile-front { background: var(--primary-pink); color: white; }
        .tile-back { background: white; transform: rotateY(180deg); border: 2px solid var(--primary-pink); }

        /* Heart Catcher Styles */
        #game-canvas {
            background: linear-gradient(to bottom, #fff0f3, #ffccd5);
            display: block;
            margin: 0 auto;
            border-bottom: 4px solid var(--dark-pink);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <audio id="bgMusic" loop>
        <source src="song1.mp3" type="audio/mpeg"> </audio>

    <div id="phase1" class="text-center animate-fade-in">
        <h1 class="romantic-text text-5xl mb-6 text-pink-600">Hi Sweetie...</h1>
        <p class="mb-8 text-gray-700 max-w-md">Your custom message goes here. Tell her something sweet to start the experience.</p>
        <button onclick="startExperience()" class="bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-full shadow-lg transition-transform hover:scale-105">
            Open My Heart
        </button>
    </div>

    <div id="phase2" class="hidden text-center">
        <h2 class="romantic-text text-3xl mb-4 text-pink-600">Some of my favorite memories</h2>
        <div class="grid grid-cols-2 gap-2 mb-6">
            <img src="photo1.jpg" class="rounded shadow"> <img src="https://via.placeholder.com/150" class="rounded shadow"> </div>
        <button onclick="startMemoryGame()" class="bg-pink-500 text-white px-6 py-2 rounded-full">Ready to Play?</button>
    </div>

    <div id="phase3" class="hidden text-center w-full">
        <h2 class="text-2xl mb-4 text-pink-600 font-bold">Match the Pairs!</h2>
        <div id="memory-grid" class="grid-5x5"></div>
    </div>

    <div id="phase4" class="hidden text-center w-full">
        <div class="flex justify-between max-w-md mx-auto mb-2 px-2">
            <span class="font-bold text-pink-600">Score: <span id="score">0</span></span>
            <span class="font-bold text-pink-600">Time: <span id="timer">60</span>s</span>
        </div>
        <canvas id="game-canvas"></canvas>
        <p class="mt-4 text-sm text-gray-500">Slide your finger/mouse to catch the hearts!</p>
    </div>

    <div id="phase5" class="hidden text-center animate-fade-in">
        <h1 class="romantic-text text-5xl mb-4 text-pink-600">Yay!</h1>
        <p class="text-xl mb-6">You collected <span id="final-score" class="font-bold text-2xl text-pink-500">0</span> hearts for me!</p>
        <div class="bg-white p-6 rounded-2xl shadow-xl max-w-md">
            <p class="italic text-gray-800">
                "Your final heart-melting message goes here. Write something beautiful to end the game."
            </p>
        </div>
    </div>

    <script>
        let score = 0;
        let timeLeft = 60;
        const music = document.getElementById('bgMusic');

        // Navigation
        function startExperience() {
            document.getElementById('phase1').classList.add('hidden');
            document.getElementById('phase2').classList.remove('hidden');
            music.play().catch(e => console.log("Autoplay blocked, waiting for interaction"));
        }

        // --- GAME 1: MEMORY GAME ---
        function startMemoryGame() {
            document.getElementById('phase2').classList.add('hidden');
            document.getElementById('phase3').classList.remove('hidden');
            
            const icons = ['üòù', 'üòä', '‚ú®', 'üòò', 'ü¶ã', 'üòç', 'üß∏', 'üíå', 'üíé', 'üåà', 'üçì', 'üç∞'];
            let gameSet = [...icons, ...icons, '‚≠ê']; // 12 pairs + 1 wildcard = 25
            gameSet.sort(() => Math.random() - 0.5);

            const grid = document.getElementById('memory-grid');
            let flippedTiles = [];
            let matchedCount = 0;

            gameSet.forEach((icon, index) => {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.innerHTML = `
                    <div class="tile-inner">
                        <div class="tile-front">?</div>
                        <div class="tile-back">${icon}</div>
                    </div>
                `;
                tile.onclick = () => {
                    if (flippedTiles.length < 2 && !tile.classList.contains('flipped')) {
                        tile.classList.add('flipped');
                        flippedTiles.push({tile, icon});

                        if (flippedTiles.length === 2) {
                            setTimeout(() => {
                                if (flippedTiles[0].icon === flippedTiles[1].icon) {
                                    matchedCount += 2;
                                    if (matchedCount >= 24) startHeartCatcher();
                                } else {
                                    flippedTiles[0].tile.classList.remove('flipped');
                                    flippedTiles[1].tile.classList.remove('flipped');
                                }
                                flippedTiles = [];
                            }, 700);
                        }
                    }
                };
                grid.appendChild(tile);
            });
        }

        // --- GAME 2: HEART CATCHER ---
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        let basket = { x: 0, y: 0, width: 70, height: 15 };
        let hearts = [];

        function startHeartCatcher() {
            document.getElementById('phase3').classList.add('hidden');
            document.getElementById('phase4').classList.remove('hidden');
            
            canvas.width = Math.min(window.innerWidth - 40, 400);
            canvas.height = 400;
            basket.y = canvas.height - 30;
            basket.x = canvas.width / 2 - basket.width / 2;

            // Controls
            const handleMove = (e) => {
                const rect = canvas.getBoundingClientRect();
                const root = document.documentElement;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                basket.x = clientX - rect.left - basket.width / 2;
            };
            canvas.addEventListener('mousemove', handleMove);
            canvas.addEventListener('touchmove', handleMove);

            const gameTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(gameTimer);
                    endGame();
                }
            }, 1000);

            updateGame();
        }

        function spawnHeart() {
            if (Math.random() < 0.05) {
                hearts.push({ x: Math.random() * (canvas.width - 20), y: 0, speed: 2 + Math.random() * 3 });
            }
        }

        function updateGame() {
            if (timeLeft <= 0) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw Basket (Slider)
            ctx.fillStyle = '#f72585';
            ctx.beginPath();
            ctx.roundRect(basket.x, basket.y, basket.width, basket.height, 10);
            ctx.fill();

            // Draw Hearts
            spawnHeart();
            hearts.forEach((heart, index) => {
                heart.y += heart.speed;
                ctx.font = "24px serif";
                ctx.fillText("üòã", heart.x, heart.y);

                // Collision Detection
                if (heart.y > basket.y && heart.y < basket.y + basket.height && 
                    heart.x > basket.x && heart.x < basket.x + basket.width) {
                    score++;
                    document.getElementById('score').innerText = score;
                    hearts.splice(index, 1);
                }
                
                if (heart.y > canvas.height) hearts.splice(index, 1);
            });

            requestAnimationFrame(updateGame);
        }

        function endGame() {
            document.getElementById('phase4').classList.add('hidden');
            document.getElementById('phase5').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
        }
    </script>
</body>
          </html>
          
